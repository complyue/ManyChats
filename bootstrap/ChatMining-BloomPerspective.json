{
  "categories": [
    {
      "captionKeys": [],
      "captions": [
        {
          "inTooltip": false,
          "isCaption": false,
          "key": "Message",
          "styles": [],
          "type": "label"
        },
        {
          "inTooltip": true,
          "isCaption": false,
          "isGdsData": false,
          "key": "timestamp",
          "styles": [],
          "type": "property"
        },
        {
          "inTooltip": false,
          "isCaption": true,
          "isGdsData": false,
          "key": "role",
          "styles": [],
          "type": "property"
        },
        {
          "inTooltip": false,
          "isCaption": true,
          "isGdsData": false,
          "key": "msgid",
          "styles": [],
          "type": "property"
        },
        {
          "inTooltip": true,
          "isCaption": false,
          "isGdsData": false,
          "key": "content",
          "styles": [],
          "type": "property"
        }
      ],
      "color": "#000000",
      "createdAt": 1700749722376,
      "icon": "no-icon",
      "id": 3,
      "labels": [
        "Message"
      ],
      "lastEditedAt": 1701678917576,
      "name": "Message",
      "properties": [
        {
          "dataType": "string",
          "exclude": false,
          "name": "content"
        },
        {
          "dataType": "string",
          "exclude": false,
          "name": "role"
        },
        {
          "dataType": "string",
          "exclude": false,
          "name": "msgid"
        },
        {
          "dataType": "DateTime",
          "exclude": false,
          "name": "timestamp"
        }
      ],
      "size": 1,
      "styleRules": [
        {
          "applyCaption": false,
          "applyColor": true,
          "applySize": false,
          "basedOn": "role_string",
          "captions": [
            {
              "inTooltip": false,
              "isCaption": false,
              "key": "Message",
              "styles": [],
              "type": "label"
            },
            {
              "inTooltip": false,
              "isCaption": true,
              "isGdsData": false,
              "key": "role",
              "styles": [],
              "type": "property"
            },
            {
              "inTooltip": true,
              "isCaption": false,
              "isGdsData": false,
              "key": "content",
              "styles": [],
              "type": "property"
            }
          ],
          "color": "#D9D9D9",
          "condition": "equals",
          "conditionValue": "user",
          "existingValues": [],
          "id": "rule:1700750008371",
          "isTimeZoneConvertEnabled": false,
          "maxColor": "#945B3E",
          "maxPoint": "unprocessed",
          "maxSize": 2,
          "midColor": "#F79767",
          "minColor": "#FDE0D1",
          "minPoint": "unprocessed",
          "minSize": 1,
          "rangeValue": null,
          "selectedTimeZone": "Z",
          "size": 1,
          "textAlign": "center",
          "textSize": 1,
          "type": "single",
          "valuesMapper": []
        },
        {
          "applyCaption": false,
          "applyColor": true,
          "applySize": true,
          "basedOn": "role_string",
          "captions": [
            {
              "inTooltip": false,
              "isCaption": false,
              "key": "Message",
              "styles": [],
              "type": "label"
            },
            {
              "inTooltip": false,
              "isCaption": true,
              "isGdsData": false,
              "key": "role",
              "styles": [],
              "type": "property"
            },
            {
              "inTooltip": true,
              "isCaption": false,
              "isGdsData": false,
              "key": "content",
              "styles": [],
              "type": "property"
            }
          ],
          "color": "#4C8EDA",
          "condition": "equals",
          "conditionValue": "system",
          "existingValues": [
            "system"
          ],
          "id": "rule:1700750435345",
          "isTimeZoneConvertEnabled": false,
          "maxColor": "#945B3E",
          "maxPoint": "unprocessed",
          "maxSize": 2,
          "midColor": "#F79767",
          "minColor": "#FDE0D1",
          "minPoint": "unprocessed",
          "minSize": 1,
          "rangeValue": null,
          "selectedTimeZone": "Z",
          "size": 2,
          "textAlign": "center",
          "textSize": 1,
          "type": "single",
          "valuesMapper": [
            {
              "color": "#FFE081",
              "hasMore": false,
              "value": "system"
            }
          ]
        },
        {
          "applyCaption": false,
          "applyColor": true,
          "applySize": false,
          "basedOn": "role_string",
          "captions": [
            {
              "inTooltip": false,
              "isCaption": false,
              "key": "Message",
              "styles": [],
              "type": "label"
            },
            {
              "inTooltip": false,
              "isCaption": false,
              "isGdsData": false,
              "key": "content",
              "styles": [],
              "type": "property"
            },
            {
              "inTooltip": false,
              "isCaption": false,
              "isGdsData": false,
              "key": "role",
              "styles": [],
              "type": "property"
            }
          ],
          "color": "#8DCC93",
          "condition": "equals",
          "conditionValue": "assistant",
          "existingValues": [
            "system",
            "user"
          ],
          "id": "rule:1700843804681",
          "isTimeZoneConvertEnabled": false,
          "maxColor": "#557A58",
          "maxPoint": "unprocessed",
          "maxSize": 2,
          "midColor": "#8DCC93",
          "minColor": "#DDF0DF",
          "minPoint": "unprocessed",
          "minSize": 1,
          "rangeValue": null,
          "selectedTimeZone": "Z",
          "size": 1,
          "textAlign": "center",
          "textSize": 1,
          "type": "single",
          "valuesMapper": [
            {
              "color": "#FFE081",
              "hasMore": false,
              "value": "system"
            },
            {
              "color": "#C990C0",
              "hasMore": false,
              "value": "user"
            }
          ]
        }
      ],
      "textAlign": "top",
      "textSize": 1
    },
    {
      "captionKeys": [],
      "captions": [
        {
          "inTooltip": false,
          "isCaption": false,
          "key": "Conversation",
          "styles": [],
          "type": "label"
        },
        {
          "inTooltip": false,
          "isCaption": true,
          "isGdsData": false,
          "key": "msgid",
          "styles": [],
          "type": "property"
        },
        {
          "inTooltip": true,
          "isCaption": false,
          "isGdsData": false,
          "key": "timestamp",
          "styles": [],
          "type": "property"
        },
        {
          "inTooltip": false,
          "isCaption": false,
          "isGdsData": false,
          "key": "cypher",
          "styles": [],
          "type": "property"
        },
        {
          "inTooltip": false,
          "isCaption": false,
          "isGdsData": false,
          "key": "json",
          "styles": [],
          "type": "property"
        }
      ],
      "color": "#F16667",
      "createdAt": 1701350819713,
      "icon": "no-icon",
      "id": 4,
      "labels": [
        "Conversation"
      ],
      "lastEditedAt": 1701355325151,
      "name": "Conversation",
      "properties": [
        {
          "dataType": "string",
          "exclude": false,
          "name": "json"
        },
        {
          "dataType": "string",
          "exclude": false,
          "name": "cypher"
        },
        {
          "dataType": "string",
          "exclude": false,
          "name": "msgid"
        },
        {
          "dataType": "DateTime",
          "exclude": false,
          "name": "timestamp"
        }
      ],
      "size": 2,
      "styleRules": [],
      "textAlign": "top",
      "textSize": 1
    },
    {
      "captionKeys": [],
      "captions": [
        {
          "inTooltip": false,
          "isCaption": false,
          "key": "Topic",
          "styles": [],
          "type": "label"
        },
        {
          "inTooltip": false,
          "isCaption": true,
          "isGdsData": false,
          "key": "summary",
          "styles": [],
          "type": "property"
        },
        {
          "inTooltip": true,
          "isCaption": false,
          "isGdsData": false,
          "key": "description",
          "styles": [],
          "type": "property"
        }
      ],
      "color": "#FFE081",
      "createdAt": 1700746754745,
      "icon": "E862F2DF-ACAD-434A-BB3C-8A00ED34AE6D",
      "id": 1,
      "labels": [
        "Topic"
      ],
      "lastEditedAt": 1701355275377,
      "name": "Topic",
      "properties": [
        {
          "dataType": "string",
          "exclude": false,
          "name": "description"
        },
        {
          "dataType": "string",
          "exclude": false,
          "name": "summary"
        }
      ],
      "size": 4,
      "styleRules": [],
      "textAlign": "top",
      "textSize": 1
    },
    {
      "captionKeys": [],
      "captions": [
        {
          "inTooltip": false,
          "isCaption": false,
          "key": "Tag",
          "styles": [],
          "type": "label"
        },
        {
          "inTooltip": false,
          "isCaption": true,
          "isGdsData": false,
          "key": "name",
          "styles": [],
          "type": "property"
        },
        {
          "inTooltip": true,
          "isCaption": false,
          "isGdsData": false,
          "key": "description",
          "styles": [],
          "type": "property"
        }
      ],
      "color": "#C990C0",
      "createdAt": 1700746754745,
      "icon": "no-icon",
      "id": 2,
      "labels": [
        "Tag"
      ],
      "lastEditedAt": 1701355275403,
      "name": "Tag",
      "properties": [
        {
          "dataType": "string",
          "exclude": false,
          "name": "name"
        },
        {
          "dataType": "string",
          "exclude": false,
          "name": "description"
        }
      ],
      "size": 1,
      "styleRules": [],
      "textAlign": "top",
      "textSize": 1
    }
  ],
  "createdAt": 1701678664730,
  "hiddenCategories": [],
  "hiddenRelationshipTypes": [],
  "hideUncategorisedData": false,
  "id": "e4ab52c0-8f9b-11ee-8cd3-77496851a9c5",
  "isAuto": true,
  "labels": {
    "Conversation": [
      {
        "dataType": "DateTime",
        "propertyKey": "timestamp",
        "type": "Conversation"
      },
      {
        "dataType": "string",
        "propertyKey": "msgid",
        "type": "Conversation"
      },
      {
        "dataType": "string",
        "propertyKey": "json",
        "type": "Conversation"
      },
      {
        "dataType": "string",
        "propertyKey": "cypher",
        "type": "Conversation"
      }
    ],
    "Message": [
      {
        "dataType": "string",
        "propertyKey": "role",
        "type": "Message"
      },
      {
        "dataType": "DateTime",
        "propertyKey": "timestamp",
        "type": "Message"
      },
      {
        "dataType": "string",
        "propertyKey": "content",
        "type": "Message"
      },
      {
        "dataType": "string",
        "propertyKey": "msgid",
        "type": "Message"
      }
    ],
    "Tag": [
      {
        "dataType": "string",
        "propertyKey": "description",
        "type": "Tag"
      },
      {
        "dataType": "string",
        "propertyKey": "name",
        "type": "Tag"
      }
    ],
    "Topic": [
      {
        "dataType": "string",
        "propertyKey": "description",
        "type": "Topic"
      },
      {
        "dataType": "string",
        "propertyKey": "summary",
        "type": "Topic"
      }
    ]
  },
  "lastEditedAt": 1701678664730,
  "metadata": {
    "indexes": [
      {
        "label": "Message",
        "propertyKeys": [
          {
            "key": "msgid",
            "metadataProp": false
          },
          {
            "key": "role",
            "metadataProp": true
          },
          {
            "key": "timestamp",
            "metadataProp": true
          },
          {
            "key": "content",
            "metadataProp": true
          }
        ],
        "type": "native"
      },
      {
        "label": null,
        "propertyKeys": [],
        "type": "native"
      },
      {
        "isMetadataPropIndex": true,
        "label": "Topic",
        "propertyKeys": [
          {
            "key": "description",
            "metadataProp": true
          },
          {
            "key": "summary",
            "metadataProp": true
          }
        ],
        "type": "native"
      },
      {
        "isMetadataPropIndex": true,
        "label": "Tag",
        "propertyKeys": [
          {
            "key": "description",
            "metadataProp": true
          },
          {
            "key": "name",
            "metadataProp": true
          }
        ],
        "type": "native"
      },
      {
        "isMetadataPropIndex": true,
        "label": "Conversation",
        "propertyKeys": [
          {
            "key": "timestamp",
            "metadataProp": true
          },
          {
            "key": "msgid",
            "metadataProp": true
          },
          {
            "key": "json",
            "metadataProp": true
          },
          {
            "key": "cypher",
            "metadataProp": true
          }
        ],
        "type": "native"
      }
    ],
    "pathSegments": [
      {
        "relationshipType": "DECOHERES",
        "source": "Message",
        "target": "Message"
      },
      {
        "relationshipType": "SNAPSHOT",
        "source": "Message",
        "target": "Conversation"
      },
      {
        "relationshipType": "INITIATES",
        "source": "Topic",
        "target": "Message"
      },
      {
        "relationshipType": "HAS_TAG",
        "source": "Topic",
        "target": "Tag"
      }
    ],
    "stats": {
      "labels": {},
      "relationshipTypes": {
        "DECOHERES": 2,
        "HAS_TAG": 1,
        "INITIATES": 1,
        "SNAPSHOT": 1
      }
    }
  },
  "name": "ChatMining",
  "palette": {
    "colors": [
      "#FFE081",
      "#C990C0",
      "#F79767",
      "#57C7E3",
      "#F16667",
      "#D9C8AE",
      "#8DCC93",
      "#ECB5C9",
      "#4C8EDA",
      "#FFC454",
      "#DA7194",
      "#569480",
      "#848484",
      "#D9D9D9"
    ],
    "currentIndex": 5
  },
  "parentPerspectiveId": "6acf1130-8ec9-11ee-b834-3358bed118c0",
  "relationshipTypes": [
    {
      "captionKeys": [],
      "captions": [
        {
          "inTooltip": true,
          "isCaption": true,
          "key": "HAS_TAG",
          "styles": [],
          "type": "relationship"
        }
      ],
      "color": "#848484",
      "id": "HAS_TAG",
      "name": "HAS_TAG",
      "properties": [],
      "size": 1,
      "styleRules": [],
      "textAlign": "top",
      "textSize": 1
    },
    {
      "captionKeys": [],
      "captions": [
        {
          "inTooltip": true,
          "isCaption": true,
          "key": "INITIATES",
          "styles": [],
          "type": "relationship"
        }
      ],
      "color": "#848484",
      "id": "INITIATES",
      "name": "INITIATES",
      "properties": [],
      "size": 1,
      "styleRules": [],
      "textAlign": "top",
      "textSize": 1
    },
    {
      "captionKeys": [],
      "captions": [
        {
          "inTooltip": true,
          "isCaption": true,
          "key": "DECOHERES",
          "styles": [],
          "type": "relationship"
        }
      ],
      "color": "#848484",
      "id": "DECOHERES",
      "name": "DECOHERES",
      "properties": [
        {
          "dataType": "bigint",
          "propertyKey": "usage.completion",
          "type": "DECOHERES"
        },
        {
          "dataType": "bigint",
          "propertyKey": "usage.total",
          "type": "DECOHERES"
        },
        {
          "dataType": "string",
          "propertyKey": "finish_reason",
          "type": "DECOHERES"
        },
        {
          "dataType": "DateTime",
          "propertyKey": "created",
          "type": "DECOHERES"
        },
        {
          "dataType": "bigint",
          "propertyKey": "usage.prompt",
          "type": "DECOHERES"
        },
        {
          "dataType": "string",
          "propertyKey": "model",
          "type": "DECOHERES"
        },
        {
          "dataType": "bigint",
          "propertyKey": "choice.index",
          "type": "DECOHERES"
        }
      ],
      "size": 1,
      "styleRules": [],
      "textAlign": "top",
      "textSize": 1
    },
    {
      "captionKeys": [],
      "captions": [
        {
          "inTooltip": true,
          "isCaption": true,
          "key": "SNAPSHOT",
          "styles": [],
          "type": "relationship"
        }
      ],
      "color": "#848484",
      "id": "SNAPSHOT",
      "name": "SNAPSHOT",
      "properties": [],
      "size": 1,
      "styleRules": [],
      "textAlign": "top",
      "textSize": 1
    }
  ],
  "sceneActions": [
    {
      "categories": [
        3
      ],
      "createdAt": 1701074378953,
      "cypher": "MATCH (q:Message {role: 'user'}) WHERE id(q) in $nodes\n\nCALL chat.ask(q) YIELD ans, r\n\n// Every time you visit the definition of this scene action,\n// mind to check the \"Write transaction\" box above, or this scene action will do nothing.\n// If no that checkbox there, you need to enable experimental features of Bloom: \"Allow write transactions\".\n// If unable to do above, just leave the line below uncommented\nMERGE (q)-[r1:DECOHERES]->(ans)\n\nRETURN ans, r\n",
      "hasCypherErrors": false,
      "id": "80719d70-8d00-11ee-80f3-e9a24a5b2848",
      "isUpdateQuery": true,
      "name": "Quest GPT",
      "relationshipTypes": null
    },
    {
      "categories": null,
      "createdAt": 1700751695990,
      "cypher": "MATCH (c:Message) WHERE id(c) in $nodes\nAND c.role IN ['system', 'assistant'] \n\nCREATE (q:Message {\n  msgid: chat.msgid(), timestamp: datetime({epochMillis: timestamp()}),\n  role: 'user', content: 'Please tell me ...'\n})\nCREATE p = (c)-[:DECOHERES]->(q)\n\nRETURN p\n",
      "hasCypherErrors": false,
      "id": "32694160-8a11-11ee-81f2-916d7027505b",
      "isUpdateQuery": true,
      "name": "New Quest",
      "relationshipTypes": null
    },
    {
      "categories": [
        1
      ],
      "createdAt": 1700736539737,
      "cypher": "MATCH (t:Topic) WHERE id(t) in $nodes\n\nCREATE (m:Message {\n  msgid: chat.msgid(), timestamp: datetime({epochMillis: timestamp()}),\n  role: 'system', content: 'You as the assistant should ...'}\n)\nCREATE p = (t)-[:INITIATES]->(m)\n\nRETURN p\n",
      "hasCypherErrors": false,
      "id": "e8946d80-89ed-11ee-8252-81adda452279",
      "isUpdateQuery": true,
      "name": "Initiate conversation",
      "relationshipTypes": null
    },
    {
      "categories": [
        3
      ],
      "createdAt": 1701350316269,
      "cypher": "MATCH (m:Message) WHERE id(m) in $nodes\n\nCALL chat.snapshots(m, 10) YIELD cnvs, r\n\nRETURN cnvs, r\n",
      "hasCypherErrors": false,
      "id": "f7e6c2c0-8f82-11ee-9472-5116bdec4c62",
      "isUpdateQuery": false,
      "name": "Show conversation snapshots",
      "relationshipTypes": null
    },
    {
      "categories": null,
      "createdAt": 1700755255620,
      "cypher": "MATCH (m:Message) WHERE id(m) in $nodes\n\nMATCH p = (h:Message)-[:DECOHERES*]->(m:Message)\nWHERE NOT (:Message)-[:DECOHERES]->(h)\n\nOPTIONAL MATCH tp = (t:Topic)-[:INITIATES]->(h)\nOPTIONAL MATCH tgp = (t)-[:HAS_TAG]->(tg:Tag)\n\nRETURN p, tp, tgp\n",
      "hasCypherErrors": false,
      "id": "7c1db040-8a19-11ee-a9d6-d9070732b86e",
      "isUpdateQuery": false,
      "name": "Show conversation graph",
      "relationshipTypes": null
    },
    {
      "categories": [
        3
      ],
      "createdAt": 1701350007769,
      "cypher": "MATCH (m:Message) WHERE id(m) in $nodes\n\nCALL chat.snapshot(m) YIELD cnvs, r\n\n// Every time you visit the definition of this scene action,\n// mind to check the \"Write transaction\" box above, or this scene action will silently fail any update to db.\n// If no that checkbox there, you need to enable experimental features of Bloom: \"Allow write transactions\".\n// If unable to do above, just leave the line below uncommented\nMERGE (m)-[r1:SNAPSHOT]->(cnvs)\n\nRETURN cnvs, r\n",
      "hasCypherErrors": false,
      "id": "40053e70-8f82-11ee-9472-5116bdec4c62",
      "isUpdateQuery": true,
      "name": "Snapshot conversation",
      "relationshipTypes": null
    },
    {
      "categories": null,
      "createdAt": 1700752593636,
      "cypher": "MATCH (q1:Message {role: 'user'}) WHERE id(q1) in $nodes\n\nCREATE (q2:Message {\n  msgid: chat.msgid(), timestamp: datetime({epochMillis: timestamp()}),\n  role: 'user', content: 'Also I want to know ...'\n})\nCREATE p = (q1)-[:DECOHERES]->(q2)\n\nRETURN p\n",
      "hasCypherErrors": false,
      "id": "49732a40-8a13-11ee-81f2-916d7027505b",
      "isUpdateQuery": true,
      "name": "More Quest",
      "relationshipTypes": null
    },
    {
      "categories": null,
      "createdAt": 1700752286066,
      "cypher": "MATCH (q:Message {role: 'user'}) WHERE id(q) in $nodes\n\nCREATE (a:Message {\n  msgid: chat.msgid(), timestamp: datetime({epochMillis: timestamp()}),\n  role: 'assistant', content: 'The answer to your question is ...'\n})\nCREATE  (q)-[r:DECOHERES]->(a)\n\nRETURN a, r\n",
      "hasCypherErrors": false,
      "id": "921fb520-8a12-11ee-81f2-916d7027505b",
      "isUpdateQuery": true,
      "name": "Fake Answer",
      "relationshipTypes": null
    }
  ],
  "templates": [
    {
      "createdAt": 1700754621840,
      "cypher": "MATCH (m:Message)\nWHERE NOT (m)-[:DECOHERES]->(:Message)\nRETURN m\nORDER BY m.timestamp DESC\nLIMIT $number\n",
      "hasCypherErrors": false,
      "id": "tmpl:1700754621840",
      "isUpdateQuery": false,
      "name": "Show messages recently made at tip of conversations",
      "params": [
        {
          "collapsed": false,
          "cypher": "UNWIND [10, 200, 500] AS n\nRETURN n\n",
          "dataType": "Integer",
          "name": "$number",
          "suggestionBoolean": false,
          "suggestionLabel": null,
          "suggestionProp": null
        }
      ],
      "text": "Show recent $number conversation tips"
    },
    {
      "createdAt": 1700754358560,
      "cypher": "MATCH (t:Topic) RETURN t\n",
      "hasCypherErrors": false,
      "id": "tmpl:1700754358560",
      "isUpdateQuery": false,
      "name": "Show all topics",
      "params": [],
      "text": "Show topics"
    },
    {
      "createdAt": 1700755437845,
      "cypher": "CREATE (t:Topic {\n  summary: 'SomeBrilliantIdea',\n  description: 'Some Brilliant Idea'\n})\nRETURN t\n",
      "hasCypherErrors": false,
      "id": "tmpl:1700755437845",
      "isUpdateQuery": true,
      "name": "Create a new topic",
      "params": [],
      "text": "Create Topic"
    },
    {
      "createdAt": 1700746851868,
      "cypher": "MATCH (t:Tag) RETURN t\n",
      "hasCypherErrors": false,
      "id": "tmpl:1700746851868",
      "isUpdateQuery": false,
      "name": "Show all tags",
      "params": [],
      "text": "Show tags"
    }
  ],
  "version": "2.11.0"
}
